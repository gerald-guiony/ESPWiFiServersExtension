//************************************************************************************************************************
// UdpClient.cpp
// Version 1.0 June, 2017
// Author Gerald Guiony
//************************************************************************************************************************

#include <Common.h>

#include "UdpClient.h"

namespace wifix {

//========================================================================================================================
//
//========================================================================================================================
void UdpClient :: setup (uint16_t thePort) {

	// Start the client
	_wiFiUdp.begin(thePort);

	Logln(F("Udp client is up"));
}

//========================================================================================================================
//
//========================================================================================================================
void UdpClient :: sendCmd (IPAddress & ip, int port, String & cmd) {

	_wiFiUdp.beginPacket(ip, port);
	_wiFiUdp << cmd;
	_wiFiUdp.endPacket();
}

//========================================================================================================================
//
//========================================================================================================================
bool UdpClient :: isResponseAvailable () {
	return (_wiFiUdp.parsePacket() > 0);
}

//========================================================================================================================
//
//========================================================================================================================
bool UdpClient :: parseResponse (Print & printer) {
	return getRespParser ().parse (_wiFiUdp, printer);
}

}